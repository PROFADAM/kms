[workspace]
resolver = "2"

members = [
    "blockchain/client",
    "blockchain/connector",
    "blockchain/connector/utilities",
    "blockchain/contracts/aipsc",
    "blockchain/contracts/asc",
    "blockchain/contracts/tendermint-ipsc",
    "blockchain/contracts/ethereum-ipsc",
    "blockchain/cosmos-proto",
    "blockchain/events",
    "blockchain/gateway",
    "blockchain/simulator",
    "conf-trace",
    "core/service",
    "core/threshold",
    "blockchain/inclusion_proofs/ethereum",
    "blockchain/inclusion_proofs/ethereum-triedb",
]

# The backward-compatibility module is excluded from the workspace in order to avoid dependency
# conflicts. This is related to the fact that it needs to import the different packages (kms,
# distributed-decryption) to test with specific versions when generating the data. However, the
# workspace already has these dependencies by nature, creating a name conflict like described in
# https://github.com/rust-lang/cargo/issues/12891
# Note that it's not possible to only generate the lock file using specific features as the resolver
# builds the graph as if all features are enabled:
# https://doc.rust-lang.org/cargo/reference/resolver.html#features
exclude = [
    "backward-compatibility"
]

[workspace.package]
authors = ["Zama"]
publish = true
edition = "2021"
license = "BSD-3-Clause-Clear"

[workspace.dependencies]
anyhow = "1.0.89"
async-trait = "0.1.81"
bincode = "1.3.3"
clap = { version = "4.5.8", features = ["derive"] }
cosmwasm-schema = "2.1.4"
cosmwasm-std = "2.1.4"
cw-controllers = "2.0.0"
cw-storage-plus = "2.0.0"
cw-utils = "2.0.0"
prost = "0.12.4"
prost-build = "0.12.4"
prost-types = "0.12.4"
rand = "0.8.5"
schemars = "0.8.16"
serde = { version = "1.0.204", features = ["derive", "rc"] }
serde_json = "1.0.120"
sylvia = "=1.1.0"
sylvia-derive = "=1.1.0"
tendermint = { version = "0.37.0", features = ["secp256k1"] }
tendermint-proto = "0.37.0"
tendermint-rpc = { version = "0.37.0", features = ["websocket-client"] }
tokio = { version = "1.37", features = ["full"] }
tonic = "0.11"
tonic-build = "0.11"
tracing = { version = "0.1.40", features = ["log"] }
typed-builder = "0.18.1"

[profile.dev.package."*"]
# Set the default for dependencies in Development mode.
opt-level = 3

[profile.dev]
# Turn on a small amount of optimization in Development mode.
opt-level = 1

[profile.test]
opt-level = 3
